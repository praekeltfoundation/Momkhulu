{% extends "cspatients/base.html" %}

{% block content %}

<div class="container-fluid">
    <div class="row">
        <div style="background-color: #f7f7f7; text-align: center; width: 100%">
            <p style="padding: 15px; float: left; color: #00a7ff">
                <a href="{% url 'cspatient_view' %}">&lt; Back to the triage board</a>
            </p>
            <div style="padding: 15px; width: 30%; display: inline-block">
                <h3>Patient Details</h3>
            </div>
            <div style="float: right; width: 218.78px;"><br/></div>
        </div>
        {% if patiententry %}
        <div style="width:100%; background-color: #f7f7f7;">
            <div style="float:left; width:50%; padding: 0px 10px 0px 20px;">
                <ul class="list-group">
                    <li class="list-group-item py-2">
                        <h4>Personal Details</h4>
                    </li>
                    <li class="list-group-item py-2">
                        SURNAME <br/>
                        {{ patiententry.patient.name }}
                    </li>
                    <li class="list-group-item py-2">
                        PATIENT ID <br/>
                        {{ patiententry.patient.patient_id }}
                    </li>
                    <li class="list-group-item py-2">
                        AGE <br/>
                        {{ patiententry.patient.age }}
                    </li>
                    <li class="list-group-item py-2">
                        GRAVPAR <br/>
                        {{ patiententry.gravpar|default_if_none:"-" }}
                    </li>
                    <li class="list-group-item py-2">
                        ADDITIONAL INFORMATION <br/>
                        {{ patiententry.outstanding_data|default_if_none:"-" }}
                    </li>
                </ul>
            </div>
            <div style="float:left; width:50%;padding: 0px 20px 0px 10px;">
                <ul class="list-group">
                    <li class="list-group-item py-2">
                        <h4>Surgery Details</h4>
                    </li>
                    <li class="list-group-item py-2">
                        <div style="float: left">
                            OPERATION <br/>
                            {{ patiententry.operation }}
                        </div>
                        {% if patiententry.completion_time %}
                            <div class="urgency urgency-0" style="padding: 6px;text-align: center;width: 200px; float: right">COMPLETE</div>
                        {% else %}
                            <div class="urgency urgency-{{ patiententry.urgency }}" style="padding: 6px;text-align: center;width: 200px; float: right">{{patiententry.get_urgency_display}}</div>
                        {% endif %}
                    </li>
                    <li class="list-group-item py-2">
                        LOCATION <br/>
                        {{ patiententry.location|default_if_none:"-" }}
                    </li>
                    <li class="list-group-item py-2">
                        INDICATION <br/>
                        {{ patiententry.indication|default_if_none:"-" }}
                    </li>
                    <li class="list-group-item py-2">
                        CLINICIAN <br/>
                        {{ patiententry.clinician|default_if_none:"-" }}
                    </li>
                    <li class="list-group-item py-2">
                        <div style="width: 50%;float: left;">
                            DECISION TIME <br/>
                            {{ patiententry.decision_time|time:"H:i" }}
                        </div>
                        <div style="width: 50%;float: left;">
                            TIME OUT OF THEATRE <br/>
                            {{ patiententry.discharge_time|time:"H:i" }}
                        </div>
                    </li>
                    <li class="list-group-item py-2">
                        <div style="width: 50%;float: left;">
                            DATE OF DELIVERY <br/>
                            {{ patiententry.decision_time|date:"Y-m-d" }}
                        </div>
                        <div style="width: 50%;float: left;">
                            NUMBER OF BABIES <br/>
                            {{ patiententry.foetus|default_if_none:"-" }}
                        </div>


                    </li>
                </ul>
            </div>
            <div style="width: 100%; float: left;padding: 20px;">
                {% for baby in patiententry.entry_babies.all %}
                    <ul class="list-group">
                        <li class="list-group-item py-2">
                            <h5>Delivery Details: Baby {{ baby.baby_number }}</h5>
                        </li>
                        <li class="list-group-item py-2">
                            TIME OF DELIVERY <br/>
                            {{ baby.delivery_time|time:"H:i" }}
                        </li>
                        <li class="list-group-item py-2">
                            WEIGHT OF BABY <br/>
                            {{ baby.baby_weight_grams }}
                        </li>
                        <li class="list-group-item py-2">
                            APGAR 1 <br/>
                            {{ baby.apgar_1 }}
                        </li>
                        <li class="list-group-item py-2">
                            APGAR 5 <br/>
                            {{ baby.apgar_5 }}
                        </li>
                        <li class="list-group-item py-2">
                            NICU <br/>
                            {{ baby.nicu }}
                        </li>
                    </ul>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="text-align: center;width: 100%;">
            <p>Sorry. No such patient was found.</p>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}
